CRUD
ğŸ’¡ C â‡’ Create
R â‡’ Read
U â‡’ Update
D â‡’ Delete
ğŸ’¡ Just consider that we have created two collections as we have created in
the live session itself.
1. users.
2. heroes.
Create
Let us create a database first, before doing anything else (Ask them to do this
along with you) â‡’ use nxm
How to check in which database we are now â‡’ db
Now let us create a collection in this database . â‡’ db.createCollection(â€usersâ€)
Now let us insert documents â‡’ db.users.insertOne({name:"Albert", org:"Masai"}) â‡’
This is to insert one document.
To insert many you can use â‡’ db.users.insertMany([{},{},{}])
Read
To see or read all the documents you can just simply do â‡’ db.users.find()
This will show you all the documents available.
Now, If I just want the documents whose org is Masai â‡’
db.users.find({org:"Masai"})
Notes 2
If there are two documents with {org:â€Masaiâ€} but I just want any one of them
then â‡’ db.users.findOne({org:â€Masaiâ€}) â‡’ It will return the first one.
Update
To update one â‡’ If I just want to add city as Bangalore whose org is Masai â‡’
db.users.updateOne({org:â€Masaiâ€},{$set: {city: â€œBangaloreâ€}})
If you want to update many â‡’ db.users.updateMany({org:â€Masaiâ€},{$set:{city:
â€œBangaloreâ€}})
ğŸ’¡ Note: If you want to see the data in a prettier way you can do â‡’
db.users.find().pretty()
This will only work in terminal though, so that you can see the data in a
proper manner.
Delete
If you want to delete one then â‡’ db.users.deleteOne({org:â€Masaiâ€})
If you want to delete many then â‡’ db.users.deleteMany({city:â€Bangaloreâ€})
ğŸ’¡ Now you can appreciate databases, to do this CRUD, it could have taken
us so much time, we can just quickly run a query and get the work done.
Let us move onâ€¦.
ğŸ’¡ Please open up the following link and copy the data from it.
pastebin.com/raw/2nuFWi3U
Notes 3
Just copy the data from the above link and create a new collection and insert this
data, instead of creating a collection, we can directly insert many and that will do
the job â‡’ db.heroes.insertMany(copied_data)
The data will be inserted into a new collection.
Now you can check all the available collections in the database â‡’ show
collections
Now we are going to see filtering of data in
advance mannerâ€¦
Comparison Operators
Talk about comparison operators â‰¤, <, â‰¥, ==, !=
How do we refer them in Mongo?
ğŸ’¡ <= â‡’ lte
< â‡’ lt
>= â‡’ gte
> â‡’ gt
== â‡’ eq
!= â‡’ ne
We can use these things for filtering out the data in a better way.
Lets us get the heroes from the data whose health is â‰¤ 50 â‡’
db.heroes.find({health: {$lte:50}}).pretty()
Similarly gte, gt, lt command can be used as well.
Notes 4
For finding the equal to, there is no need to use eq , you can simply use â‡’
db.heroes.find({health:86})
For ne â‡’ db.heroes.find({health: {$ne:86}}) â‡’ this will give all the heroes except
the one whose health is 86.
Logical Operators
For understanding this we are going to use users collection
Logical operators and, or
We can use these things for filtering out the data in a better way.
ğŸ’¡ Note: If I want to add {country: â€œIndiaâ€} in all the documents then â‡’
db.users.updateMany({},{$set: {country:â€Indiaâ€}})
Find all the users whose org is Masai and country as India â‡’
db.users.find({orq:â€Masaiâ€, country: â€œIndiaâ€})
It is not necessary to use and over here as database will return the data only if
both are present.
What if you want to use and â‡’ db.users.find({$and:[{org:â€Masaiâ€},
{country:â€Indiaâ€}]})
Similarly or can be used.
You can also try this with the heroes collection data and show them.
Want the data whose health is in between 40 and 60 â‡’ db.heroes.find({$and:
[{health:{$gt:40}}, {health:{$lt:60}}]}).pretty()
ğŸ’¡ Note: Based on our requirement, we can use multiple things together as
well.
Limit
Notes 5
We can limit the result, criteria can be anything.
db.heroes.find().limit(2).pretty() â‡’ First two documents will be returned.
db.heroes.find({org:"Masai"}).limit(2).pretty() =â‡’ Return the first two documents
with org as Masai.
Skip
We can use it to skip documents.
db.users.find({country:â€Indiaâ€}).skip(2).pretty() â‡’ This will skip the first 2
documents.
We can even combine skip() and limit() as well
db.users.find({country:â€Indiaâ€}).skip(1).limit(2).pretty() â‡’ This will skip the first
one and then limit the result to two documents.
ğŸ’¡ Question: Where exactly we can use this in real life?
Answer: This can be used in pagination.
Sort
It will sort the documents in ascending or descending order.
db.heroes.find().sort({health:1}).pretty() â‡’ This will sort in ascending order
For descending order we can use -1
ğŸ’¡ Question: Can we sort Alphabets as well.
Answer: Yes, it can, it sorts on the basis of ASCII value, so you have to
keep track of case as well.
Notes 6
Mongo Cheat Sheet
MongoDB Cheat Sheet | MongoDB
MongoDB Cheat Sheet by MongoDB for our awesome
MongoDB Community <3.
https://www.mongodb.com/developer/products/mongodb/che
at-sheet/